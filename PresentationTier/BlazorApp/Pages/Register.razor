@page "/Register"
@inject IUserService UserService
@using HttpClients.ClientInterfaces
@using global::Shared.DTOs


<div class="">
    <h3>Register</h3>
    <form>
        <label for="username">User name:</label><br>
        <input type="text" id="username" name="username"><br>
        <label for="password">Password:</label><br>
        <input type="text" id="password" name="password">
        <label for="fname">First name:</label><br>
        <input type="text" id="fname" name="fname">
        <label for="lname">Last name:</label><br>
        <input type="text" id="lname" name="lname">
        <label for="credits">Credits:</label><br>
        <input type="text" id="credits" name="credits">
        <label for="type">Type:</label><br>
        <input type="text" id="type" name="type">
    </form>
</div>

@code {
    private string userName;
    private string password;
    private string fName;
    private string lName;
    private string type;
    private int credits;

    // private async Task Create()
    // {
    //     var resultMsg = "";
    //
    //     try
    //     {
    //         await UserService.Create(new UserCreationDto(username));
    //         var username = "";
    //         resultMsg = "User successfully created";
    //     }
    //     catch (Exception e)
    //     {
    //         Console.WriteLine(e);
    //         resultMsg = e.Message;
    //     }
    //
    //     var userCreationDto = new UserCreationDto
    //     {
    //         
    //     };
    //
    //     await UserService.Create(userCreationDto);
    // }

    private async Task Create()
    {
        
        try
        {
            UserCreationDTO dto = new();
            dto.userName = userName;
            dto.password = password;
            dto.FirstName = fName;
            dto.LastName = lName;
            dto.Credits = credits;
            dto.type = type;

        await UserService.CreateAsync(dto);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
            throw;
        }
    }
    

}